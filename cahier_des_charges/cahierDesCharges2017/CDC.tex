\documentclass{report}

\usepackage{titlesec, blindtext, color}
\definecolor{gray75}{gray}{0.75}
\newcommand{\hsp}{\hspace{20pt}}
\titleformat{\chapter}[hang]{\Huge\bfseries}{\thechapter\hsp\textcolor{gray75}{|}\hsp}{0pt}{\Huge\bfseries}



\usepackage[french]{babel} 
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[top=3cm, bottom=3cm, left=2.5cm, right=2.5cm]{geometry}
\usepackage{color}
\usepackage{array}
\usepackage{hyperref}

\usepackage{verbatim}
\usepackage{graphicx}
\graphicspath{ {img/} }
\usepackage{geometry}

\date{Novembre 2016}

\makeatletter

\def\clap#1{\hbox to 0pt{\hss #1\hss}}%
\def\ligne#1{%
\hbox to \hsize{%
\vbox{\centering #1}}}%
\def\haut#1#2#3{%
\hbox to \hsize{%
\rlap{\vtop{\raggedright #1}}%
\hss
\clap{\vtop{\centering #2}}%
\hss
\llap{\vtop{\raggedleft #3}}}}%
\def\bas#1#2#3{%
\hbox to \hsize{%
\rlap{\vbox{\raggedright #1}}%
\hss
\clap{\vbox{\centering #2}}%
\hss
\llap{\vbox{\raggedleft #3}}}}%
\def\maketitle{%
\thispagestyle{empty}\vbox to \vsize{%
\haut{}{\@blurb}{}

\vspace{1cm}
\includegraphics[width=0.35\textwidth]{Logo_ESILV.jpeg}
\hfill
\includegraphics[width=0.35\textwidth]{logo_assos.jpeg}\\

\vfill

\vspace{1cm}
\begin{flushleft}
\usefont{OT1}{ptm}{m}{n}
\huge \@title
\end{flushleft}
\par
\hrule height 4pt
\par
\begin{flushright}
\usefont{OT1}{phv}{m}{n}
\Large \@author
\par
\end{flushright}

\vspace{1cm}
\vfill
\vfill

\bas{}{\@location, le \@date}{}
}%
\cleardoublepage
}
\def\date#1{\def\@date{#1}}
\def\author#1{\def\@author{#1}}
\def\title#1{\def\@title{#1}}
\def\location#1{\def\@location{#1}}
\def\blurb#1{\def\@blurb{#1}}
\date{\today}
\author{}
\title{}
\location{Amiens}\blurb{}
\makeatother
\title{Cahier des charges}
\author{Equipe CFR-ESILV 2017}
\location{Paris La Défense}

\blurb{%
\textbf{École supérieure d'ingénieurs Léonard-de-Vinci}\\[1em]
}% 



% \begin{figure}[!h]
% \centering
% \includegraphics[width=5 cm]{Logo_ESILV.png}
% \caption{Architecture générale}
% \end{figure}



\begin{document}

\maketitle


\hypersetup{pdfborder={0 0 0},colorlinks} 
\tableofcontents


\chapter{Présentation}


\paragraph{}
Notre équipe pour la Coupe de France de Robotique (CFR) est constituée uniquement d'étudiants de 
l'ESILV (École Supérieure d?Ingénieurs Leonard de Vinci).
Pour bénéficier d'une certaine expérience dans ce projet, trois étudiants de l'année 3
sont cette année avec nous : 
\paragraph{}
\begin{itemize}
\item POUSSEUR Hugo (chef de projet) 
\item BRINGER Hippolyte
\item FRADET Guillaume
\item HOUAOUI Rabah
\item L'OUJDI Sofiane
\item PIERRE Hugo
\item SAM Medhi 
\end{itemize}



\paragraph{}
Et bien sûr la majorité de l'équipe est formée par des étudiants de deuxièmes années: 

\paragraph{}
\begin{itemize}
\item JONAH HARISON Johan 
\item POUSSEUR Hugo
\item PIERRE Hugo
\item FRADET Guillaume
\item ALBIZZATI Gregoire
\item MARTIN Jeremy
\item DIAZ PEREZ Anais
\item BESSILA Rania 
\item RAMOS Miguel 
\end{itemize}


\paragraph{}
Un mentor nous a été assigné pour nous suivre tout au long de la réalisation de notre projet : 

\begin{itemize}
\item DJERROUD Halim 
\end{itemize}


\paragraph{}
l'ESILV a déjà participé il y a deux ans et également l'année dernière. 
Une association de Robotique "DAVINCIBOT" a d'ailleurs été créée l'an passé par GREGORI Anthony. 
Nous voulons obtenir un statut d'association afin de bénéficier d'aide financière de la part de la 
COFA\footnote{COmmission du Financement des Associations} et aussi auprès de sponsors extérieurs. 

\paragraph{}
En effet, la réalisation de robots demande un certain budget pour l'achat des differents composants
(cartes Arduino, cartes Raspberry PI, corps des robots ...).

\paragraph{}
Cette année l'association a changé de bureau : 

Président  : JONAH HARISON Johan 

Trésorier : POUSSEUR Hugo 

\paragraph{}
GREGORI Anthony, ancien président de l'association, se charge de la communication web; c'est 
à dire la gestion de notre site "davincibot.fr", de la page facebook "Davincibot" et du compte 
tweeter "@DavincibotEsilv".

\paragraph{}
Au niveau de l'école, la réalisation de ce projet s'inscrit dans le PIX 2 (Projet d'Imagination
et d'Exploration année 2). 

C'est un projet dont le but est : 
\paragraph{}

\begin{itemize}
\item d'appliquer ce qu'on apprend en cours
\item de travailler en groupe 
\item de découvrir d'autres outils (en plus des cours)
\item de construire un produit 
\item d'apprendre à gerer un long projet avec un budget
\end{itemize}


\paragraph{}
Le thème de cette année est "Ville Intelligente et Collaborative". 
*\paragraph{}
\begin{itemize}
\item Comment la conception d'un robot peut répondre à cette problématique? 
\end{itemize}

\paragraph{}
Nous construisons ce qu'on appelle un automate, c'est à dire un robot capable de se déplacer et 
réaliser des actions. Nous avons là un robot qui pourrait opérer dans une maison (comme 
une aide aux tâches ménagères par exemple) ou à plus grande échelle dans une ville. 


\chapter{Projet}

\section{La coupe de France de robotique }
\paragraph{}
La coupe de France de robotique a été créée en 1994 et se déroulait jusqu?en 2014 à la Ferté-Bernard, dans le 
département de la Sarthe. Elle a lieu tous les ans à la fin mai et réunie environ 200 équipes de toute la France 
venues confronter leurs robots sur une table. Le règlement change tous les ans en fonction de l?épreuve proposée. 
Cette année, le thème est la plage et comporte plusieurs épreuves qui rapportent chacune un nombre de points 
bien définis. Les épreuves se déroulent donc sur une table avec deux concurrents, chacun ayant ces épreuves 
indépendantes de l?autre.  

Ces épreuves sont : 

\paragraph{}
\begin{itemize}
\item Hisser un drapeau en fermant une porte
\item Pêcher des poissons 
\item Construire un château de sable
\item Collecter des coquillages
\item Ouvrir un parasol intégré au robot (Funny Action)
\end{itemize} 

\paragraph{}
bien sûr, toutes les épreuves ne sont pas obligatoires et peuvent être effectuées dans l'ordre que l'on souhaite  


\section{Contraintes à respecter}
\paragraph{}
Il y a donc, comme dans toutes compétitions, des contraintes à respecter. Tout d?abord, un robot ne peut pas 
empêcher l?adversaire de marquer des points, ou gêner de quelconque façons la progression de son adversaire. 
Ensuite vient les contraintes sur le dimensionnement des robots. Le robot principal ne doit pas excéder 1200 
mm de périmètre au départ (donc non déployé), et 1500 mm de périmètre lorsqu?il est déployé. Pour le second 
robot, il ne doit pas dépasser 700 mm au départ et 900 mm déployé. Ils ne doivent pas dépasser 350 mm de hauteur. 
Le robot doit être autonome autant au niveau de sa progression que de son alimentation. 

\paragraph{}
Il doit y avoir deux espaces rectangulaires de 100x70 mm laissés libre sur au moins deux 
faces du robot pour les autocollants de l?organisation.

\paragraph{}
Les robots doivent être démarrés avec un dispositif composé d?un cordon d?au moins 500 mm de long qui ne
restera pas sur le robot après le départ. Ils doivent avoir un bouton d?arrêt d?urgence facilement accessible sur 
le dessus du robot, et aussi d?un système permettant leurs arrêts automatiques au bout de 90 secondes. Ils seront 
composés aussi d?un système permettant d'éviter les autres robots et d?un support pouvant accueillir une balise de détection de l?équipe adverse.

\paragraph{}
Les matchs durent 90 secondes au-delà desquelles les robots ne peuvent plus se déplacer, mais possèdent encore 5 
secondes pour faire la Funny Action. 

\section{Epreuves choisies}
\paragraph{}
Nous avons donc choisi, en fonction de toutes ces contraintes de réaliser les épreuves suivantes : 
\begin{itemize}
\item Drapeaux (10 points par porte)
\item Pêche (5 points hors de l?eau et 10 points dans le filet)
\item Château de sable (2 points par bloc dans la zone, 2 points supplémentaires par bloc empilé et 12 points supplémentaires si le modèle du château est respecté)
\item La Funny Action (20 points si le parasol est valide)
\end{itemize}

\paragraph{}
Nous avons choisi ces épreuves car elles nous paraissent faisables et plutôt facile à réaliser. Pour 
le château de sable nous avons juste décidé de pousser les blocs présents au niveau de la table dans la zone, 
car il y en a en hauteur. Pour les coquillages nous avons décidé que cela allait nous prendre beaucoup de temps à 
réaliser car ils sont de couleurs différentes et certains appartiennent à l?autre équipe. Nous nous sommes dit que 
nous allions prendre trop de risque pour le peu de points que nous pourrions gagner sur cette épreuve. 

\paragraph{}
Nous pensons pouvoir gagner environ 60 à 100 points avec la réalisation de toutes ces épreuves.

\paragraph{}
\begin{tabular}{|l|l|}
  \hline
  Epreuve & Points\\
  \hline
  Drapeaux & 10 par porte \\
  Péche en mer & 5 hors de l'eau - 10 filet \\
	Château de sable & 2 bloc dans la zone - 2 bloc empilé - 12 château \\
	Coquillages & 2 sur la serviette \\
	Funny action & 20 \\
  \hline
\end{tabular}


\section{Organisation interne}

\paragraph{}
Pour mener à bien ce projet, nous avons dû nous organiser de manière spécifique. Du fait de la taille de l'équipe. Nous 
utilisons une méthode de travail dit par XP ( Extreme programming ).

Cette méthode de travail inventée en 1999 se base notament sur la communication et la simplicité.

Elle est très utilisée dans le milieu informatique pour favoriser la communication entre l'équipe projet, le client 
et les membres au sein de l?équipe.

\paragraph{}
Cette méthode est bien adaptée à notre situation, nous allons travailler par binômes sur des taches
définies et en évoluant sur les différents postes au sein de l'équipe.Ceci nous permettera de toucher à toutes les facettes du projet,
et d'etre au courant de l'avancement de tous les objectifs.\\
Ainsi un membre de l'équipe ne fera pas toujours la même chose et chaque membre apportera sa part à l'ensemble du projet.


\paragraph{}
Pour mener à bien ce projet, nous nous organisons comme suit :
\begin{itemize}
\item Une réunion hebdomadaire le lundi après midi 
\item Nous nous voyons aussi en dehors de la réunion du lundi pour pouvoir en faire plus
\item Compte rendu pour chaque réunion
\end{itemize}


\chapter{Les outils utilisés}

\section{Un système d'exploitation pour les robots}
\paragraph{}
Les épreuves que nous devons affronter imposent l'exécution de plusieurs tâches en parallèles, par exemple 
faire avancer le robot tout en ajustant sa position ou tout simplement exécuter différentes tâches
afin de respecter les contraintes temporelles imposées par le règlement. Ce mode de fonctionnement impose une 
programmation parallèles, ce qui n'est pas possible avec les microcontrôleurs de type 
Arduino \footnote{Arduino est un circuit imprimé en matériel libre sur lequel se trouve un microcontrôleur}.
Pour ces raisons nous avons décidé d'utiliser une autre technologie basée aussi sur des microcontrôleurs
plus puissant, à savoir la Raspberry Pi \footnote{Le Raspberry Pi est un nano-ordinateur monocarte à processeur ARM}

\paragraph{}
La programmation parallèle pose à son tour un problème. Il est nécessaire d'avoir
une connaissance approfondie d'un langage de programmation spécialisé tel que C ou C++. Afin de pallier à ce problème, nous avons 
choisi d'utiliser un système d'exploitation spécialisé dans la programmation des robots. Ce dernier étant conçu dans 
le but de faciliter la programmation des robots. Chaque concepteur de robot passait un temps non négligeable 
à concevoir matériellement son robot ainsi que le logiciel 
embarqué associé. Cela demandait des compétences en mécanique, électronique et programmation embarquée. 
Généralement, les programmes ainsi conçus correspondaient plus à de la programmation embarquée, proche 
de l'électronique, qu'à de la robotique proprement dite, telle que nous pouvons la rencontrer aujourd'hui 
dans la robotique. La réutilisation des programmes était non triviale car fortement liée au 
matériel sous-jacent. 

\paragraph{}
Comme son nom l'indique, ROS (Robot Operating System) est un système d'exploitation pour robots. De même que 
les systèmes d'exploitation pour les ordinateurs. 
Il fournit des services proches d'un système d'exploitation (abstraction du matériel, 
gestion de la concurrence, des processus?) mais aussi des fonctionnalités de haut niveau (appels 
asynchrones, appels synchrones, base centralisée de données, système de paramétrage du robot?). L'idée principale d'un OS 
robotique est d'éviter de réinventer la roue à chaque fois et de proposer des fonctionnalités standardisées faisant 
abstraction du matériel.

\paragraph{}
Le principe de base d'un OS robotique est de faire fonctionner en parallèle un grand nombre d'exécutables qui 
doivent pouvoir échanger de l'information de manière simple, à l'aide de messages textes. Par exemple,
interroger à une fréquence définie les capteurs du robot (capteur de distance à ultrasons ou infrarouge, capteur 
de pression, capteur de température, gyroscope, accéléromètre, caméras, microphones?), récupérer ces informations, 
les traiter (faire ce que l'on appelle la fusion de données), les passer à des algorithmes de traitement (traitement 
de la parole, vision artificielle, localisation et cartographie simultanée?) et enfin contrôler les moteurs en retour. 
Tout ce processus s'effectue en continu et en parallèle. D'autre part, l'OS robotique doit assurer la gestion de la 
concurrence afin d'assurer l'accès efficace aux ressources du robot. 

\section{Architecture de nos robots}
\paragraph{}
Comme nous l'avons annoncé dès le début de ce rapport nous avons décidé de construire deux robots. Dans le but d'optimiser 
le processus de construction nous avons adopté la même architecture pour les deux robots, nous avons utilisé pour chaque robot 
une carte RaspberryPi2 et une carte Arduino avec un shield pour contrôler les moteurs qui font avancer le robot.


\begin{figure}[!h]
\centering
\includegraphics[width=10 cm]{img.png}
\caption{RaspberryPi2 , carte Arduino avec un shield et moteur}
\end{figure}

\paragraph{}
Dans la figure suivante nous allons montrer l'architecture générale qui décrit l'agencement des ces différents modules. 
\paragraph{}
Une carte RaspberryPi2 sur laquelle nous avons embarqué l'OS ROS et développé un petit module. Celui-ci permet de contrôler
les moteurs qui font avancer le robot. Cette carte n'est pas assez puissante pour alimenter directement les moteurs, pour cela 
nous avons intercalé entre cette dernière et les moteurs une carte arduino avec un shield prévu pour contrôler les moteurs. 
Sur la carte arduino aussi, un petit code a été embarqué pour communiquer avec la carte RaspberryPi2.
\paragraph{}
Pour les capteurs et les effecteurs qui ne demandent pas une grande quantité d'énergie de fonctionnement nous les avons directement connectés 
sur la carte RaspberryPi2.

\begin{figure}[!h]
\centering
\includegraphics[width=10 cm]{archi_1.png}
\caption{Architecture générale}
\end{figure}

\paragraph{}
Pour de valider notre architecture nous avons fait quelques essais avec un petit robot improvisé, ce dernier
a pour but d'interpréter des commandes envoyées par l'utilisateur en utilisant les touches flèches directionnelles du clavier.

\begin{figure}[!h]
\centering
\includegraphics[width=10 cm]{robo_test.png}
\caption{tt}
\end{figure}

Le code embarqué sur ROS 

\begin{verbatim}
 
\end{verbatim}


\section{La table de jeu}
\paragraph{}
Les deux robots évoluent donc sur une table de jeux possédant des obstacles et des endroits de différentes couleurs. La 
table est de 3000 mm par 2000 mm avec des bordures de chaque côté. Chaque équipe possède une zone de départ matérialisée 
par une zone peinte à la couleur de l?équipe. Toutes les épreuves sont présentes sur la table:  
des drapeaux avec la porte qu?il faut fermer, ensuite les bacs d?eau avec les poissons à pêcher sur le côté de la table. 
Pour le château de sable, il y a une zone où doivent être mis les blocs pour gagner des points. Ces blocs sont éparpillés 
sur l?aire de jeu, avec une place bien définie pour chacun. Ensuite, il y a les coquillages (épreuve que nous 
ne réaliserons pas) qui sont répartis aléatoirement sur la table de jeu, et à des places bien précises sur 
le « rocher ».

\paragraph{}
Nous avons donc décidé de reproduire à l?identique la table pour nous aider dans la réalisation des robots et 
nous permettre de faire des réglages précis.
Pour réaliser notre table, nous possédons déjà la table des années précedentes. Nous allons donc reproduire le 
décor de la table de cette année. Pour se faire nous avons recouvert de papiers adhésifs colorés la table, pour 
ne pas avoir à la peindre. Pour se procurer les différentes pièces nécessaires, la Coupe de France a fourni 
sur son site internet les différents plans des pièces et les fichiers pour les impressions 3D de ces dernières. 
La table sera accessible dans notre salle et nous aider dans la réalisation du robot.


\begin{figure}[!h]
\centering
\includegraphics[width=12 cm]{table.jpg}
\caption{Table}
\end{figure}


\newpage
\section{Un travail collaboratif}
\paragraph{}
Note équipe est composée de quatorze membres, le travail en équipe devient très difficile à partir du moment où on travaille
sur les mêmes tâches. Pour résoudre ce problème épineux, nous avons opté pour 
l'utilisation d'un système de versioning GIT. Ce dernier est un système qui enregistre l'évolution d'un fichier ou d'un 
ensemble de fichiers au cours du temps de manière à ce qu'on puisse rappeler une version antérieure d'un fichier à tout moment.
De plus il permet aussi de gérer les conflits qui peuvent survenir dans le cas où plusieurs utilisateurs travaillent sur 
la même portion de code.

\paragraph{}
Le logiciel git fonctionne en mode décentralisé, c'est-à-dire qu'aucun serveur n'est requis pour fonctionner, mais ce mode 
de fonctionnement est difficile à mettre en place. nous avons opté pour une utilisation du mode centralisé de git, ce mode permet
de centraliser le code sur un serveur et chaque utilisateur pourra consulter et effectuer des modifications. 

\paragraph{}
Nous avons choisi d'utiliser la plate-forme GitHub.
Elle présente l?avantage d'être gratuite et offre une version web qui permet de 
consulter directement les modifications en ligne. Nous avons créé un compte pour chaque membre de l'équipe et nous avons créé 
deux dépôts principaux, le premier permet de gérer nos documents de travail: le planning, le cahier des charges , les documents 
de conception etc, un deuxième dépôt est résevé strictement au code. Ces derniers sont consultables sur les deux url suivantes: 

\paragraph{}
\begin{itemize}
 \item \url{https://github.com/ESILV-CFR-2016/test}
 \item \url{https://github.com/ESILV-CFR-2016/ros_raspi_pkg}
\end{itemize}



\section{Une documentation de qualité}
\paragraph{}
Afin de produire une documentation de qualité nous avons décidé d'utiliser \LaTeX. 
Beaucoup de personnes se demandent pourquoi nous utilisons un traitement de texte comme LaTeX si 
rébarbatif alors qu'il existe des traitements de texte WYSIWYG \footnote{« what you see is what you get », signifiant 
littéralement en français « ce que vous voyez est ce que vous obtenez} de plus en plus performant avec 
des correcteurs orthographiques et grammaticaux, avec création de tableaux par simples clics de souris, 
avec des dizaines de polices de caractères différentes, avec des éditeurs de formules WYSIWYG également.
La réponse est simple \LaTeX  est une vraie merveille si on doit rédiger un document avec de nombreuses pages car la mise 
en forme de celles-ci sont très soignées. De même, la création et la modification de celles-ci sont relativement simple.

\paragraph{}
LaTeX permet à l'utilisateur de se concentrer sur le contenu du document sans se soucier de la mise en forme qui sera 
effectuée automatiquement. Par exemple, on change de taille de caractères relativement à une taille par défaut 
précisée au début du document. Donc si on modifie la taille par défaut, les tailles relatives sont modifiées également 
et il n'est pas nécessaire de mettre à nouveau tout le document en page.

\paragraph{}
Nous avons choisi ce mode d'édition pour l'ensemble de nos document ainsi, d'un coté cela nous permettra 
de nous entraîner à l'utilisation de LaTex et d'un autre coté vu que LaTeX utilise du texte cela 
facilite la rédaction collaborative grâce à Git. 

\section{De la conception à la réalisation}
\paragraph{}
Pour la partie conception mécanique nous avons choisi 
le logiciel Solidworks. Il permet de modéliser des objets en 3D. Grâçe au FabLab de l'école, nous allons imprimer 
ces pieces en 3D. Il serait notamment souhaitable d'imprimer la base roulante du robot, et les petits accessoires 
du plateau (les coquillages par exemples...).

\paragraph{}
Solidworks est un logiciel de modélisation, le but de ce logiciel est de
créer des plans de la pièce modélisée. Ces plans peuvent être utilisés par
un centre d?usinage afin de réaliser le produit ou de support pour une
présentation du projet. A l?heure où l?imprimante 3D devient de plus en
plus courante, il est désormais possible d?imprimer directement la pièce à
partir de sa modélisation. Cette technique est intéressante pour la
réalisation de pièces complexes et son faible coût (aucune main
d?oeuvre). Nous avons la chance d?avoir accès au FabLab du pole Léonard de
Vinci composé de plusieurs imprimantes 3D.

\paragraph{}

\begin{figure}[!h]
\centering
\includegraphics[width=12 cm]{robot_con.jpg}
\caption{Robot }
\end{figure}



\chapter{Calendrier}
\section{Date - Coupe de France de Robotique}
\paragraph{}
La Coupe de France de Robotique nous impose quelques deadlines telles que :
\paragraph{}
\begin{itemize}
\item 31/12 : (Deadline) Inscription sur le site Poolzor.
	 (http://www.planete-sciences.org/robot/poolzor/)
\item En Mai 2016, sur une durée d'une semaine se déroule la Coupe de France, la date exacte et le lieu n'ont pas encore été précisés.
\end{itemize}





\section{Date - Ecole}
\paragraph{}
La participation à la Coupe de France de Robotique s'inscrit dans le cadre d'un projet donné 
par l'école, de ce fait nous devons respecter plusieurs deadlines qui permettent l'avancement de notre projet :
\paragraph{}
\begin{itemize}
\item 21/11 : Rendu du pitch, filmé (45 à 60 secondes face caméra pour "vendre" notre projet).
\item 22/11 : Rendu du cahier des charges du projet  (1-2 pages)  +  Définition et répartition des tâches (2-3 pages).
\item 16/12 : Evaluation des membres du projet.
\item 10/01 : Première commande de matériel.
\item 11/01 : Première soutenance (présentation et avancement ).
\item 01/02 : Seconde commande de matériel.
\item 04/04 : Premier prototype.
\item 22/05 : Slides de présentation pour la soutenance finale.
\item 24/05 : Soutenance finale et rendu d'un rapport du projet de 6 à 8 pages .
\item 29/05 : Vidéo projet (1 à 2 minutes) avec un résumé de notre projet, ses avancements et un visuel de nos robots.
\item 02/06 : Journée projets ( présentation  des projets de toutes les équipes).
\end{itemize}




	 
\end{document}